import { readFileSync, writeFileSync } from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const pkg = JSON.parse(readFileSync('package.json', 'utf-8'));

const deps = {
  CONTRACTS_VERSION: pkg.dependencies['@hyperlane-xyz/core'],
  SDK_VERSION: pkg.version,
};

const versions = `// This file is generated by scripts/gen-versions.ts

export const CONTRACTS_VERSION = '${deps.CONTRACTS_VERSION}';
export const SDK_VERSION = '${deps.SDK_VERSION}';
`;

writeFileSync(path.join(__dirname, '../src/versions.ts'), versions);
